# PR内の不要コード調査

現在のブランチのPRで追加・変更されたコードの中で、不要または改善可能なパターンを調査する。

## 調査対象

### 1. 不要なoptional（`?`）

以下のパターンを抽出して調査:
- プロパティ定義: `propertyName?: Type`
- 関数引数: `(arg?: Type)`
- 型定義のプロパティ: `{ prop?: Type }`

**検出基準**:
- 全ての呼び出し箇所で値が渡されている
- 全てのオブジェクト生成箇所でプロパティが設定されている
- 常にデフォルト値で非null化している（`??` や `= defaultValue`）
- 実装側で常に値が設定されている

### 2. 未使用のエクスポート

以下のパターンを調査:
- `export type`
- `export const`
- `export function`
- `export class`

**検出基準**:
- 定義ファイル以外からの参照がない → 未使用
- テストファイルからのみ参照 → テスト用として記録
- 内部でのみ使用（ファイル内のみ）→ export不要

## 手順

1. 現在のブランチ名を取得し、対応するPR番号を特定する
2. `gh pr diff` でPRの変更内容を取得する
3. 追加された行から調査対象のパターンを抽出
4. 各パターンについて実際の使用箇所を調査
5. 結果をまとめて報告する

## 出力形式

### 不要なoptional

| ファイル:行 | コード | 理由 | 修正案 |
|------------|--------|------|--------|
| path/to/file.ts:42 | `prop?: string` | 全呼び出しで値が渡されている | `prop: string` |

### 未使用エクスポート

| ファイル | エクスポート名 | 種別 | 状態 | 参照元 |
|---------|--------------|------|------|--------|
| path/to/file.ts | exportName | type/const/function | 未使用/テスト用 | 参照ファイル一覧 |

## 注意事項

- 外部APIやライブラリとの互換性のために意図的にoptionalにしている場合がある
- 将来の拡張性のためにoptionalやexportにしている場合は、その旨コメントがあるか確認
- 修正提案は具体的なコード変更案を提示する
